<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 For Teachers | Teach Yourself or Others R</title>
  <meta name="description" content="4 For Teachers | Teach Yourself or Others R" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="4 For Teachers | Teach Yourself or Others R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="cover.png" />
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 For Teachers | Teach Yourself or Others R" />
  
  
  <meta name="twitter:image" content="cover.png" />

<meta name="author" content="Adam Rawles" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="for-students.html"/>
<link rel="next" href="exercises.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> teacheR</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#about-me"><i class="fa fa-check"></i><b>1.2</b> About Me</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#what-is-r"><i class="fa fa-check"></i><b>2.1</b> What is R?</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#should-i-use-r"><i class="fa fa-check"></i><b>2.2</b> Should I use R?</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#using-r"><i class="fa fa-check"></i><b>2.3</b> Using R</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#rstudio"><i class="fa fa-check"></i><b>2.4</b> RStudio</a><ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#what-is-an-ide"><i class="fa fa-check"></i><b>2.4.1</b> What is an IDE?</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction.html"><a href="introduction.html#rstudio-panes"><i class="fa fa-check"></i><b>2.4.2</b> RStudio Panes</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#packages"><i class="fa fa-check"></i><b>2.5</b> Packages</a><ul>
<li class="chapter" data-level="2.5.1" data-path="introduction.html"><a href="introduction.html#installing-packages"><i class="fa fa-check"></i><b>2.5.1</b> Installing packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="for-students.html"><a href="for-students.html"><i class="fa fa-check"></i><b>3</b> For Students</a><ul>
<li class="chapter" data-level="3.1" data-path="for-students.html"><a href="for-students.html#operators"><i class="fa fa-check"></i><b>3.1</b> Operators</a><ul>
<li class="chapter" data-level="3.1.1" data-path="for-students.html"><a href="for-students.html#arithmetic-operators"><i class="fa fa-check"></i><b>3.1.1</b> Arithmetic operators</a></li>
<li class="chapter" data-level="3.1.2" data-path="for-students.html"><a href="for-students.html#logical-operators"><i class="fa fa-check"></i><b>3.1.2</b> Logical operators</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="for-students.html"><a href="for-students.html#variable-assignment"><i class="fa fa-check"></i><b>3.2</b> Variable assignment</a></li>
<li class="chapter" data-level="3.3" data-path="for-students.html"><a href="for-students.html#data-types"><i class="fa fa-check"></i><b>3.3</b> Data types</a><ul>
<li class="chapter" data-level="3.3.1" data-path="for-students.html"><a href="for-students.html#logical"><i class="fa fa-check"></i><b>3.3.1</b> Logical</a></li>
<li class="chapter" data-level="3.3.2" data-path="for-students.html"><a href="for-students.html#double"><i class="fa fa-check"></i><b>3.3.2</b> Double</a></li>
<li class="chapter" data-level="3.3.3" data-path="for-students.html"><a href="for-students.html#integer"><i class="fa fa-check"></i><b>3.3.3</b> Integer</a></li>
<li class="chapter" data-level="3.3.4" data-path="for-students.html"><a href="for-students.html#character"><i class="fa fa-check"></i><b>3.3.4</b> Character</a></li>
<li class="chapter" data-level="3.3.5" data-path="for-students.html"><a href="for-students.html#factors"><i class="fa fa-check"></i><b>3.3.5</b> Factors</a></li>
<li class="chapter" data-level="3.3.6" data-path="for-students.html"><a href="for-students.html#dates"><i class="fa fa-check"></i><b>3.3.6</b> Dates</a></li>
<li class="chapter" data-level="3.3.7" data-path="for-students.html"><a href="for-students.html#datetimes-posixct"><i class="fa fa-check"></i><b>3.3.7</b> Datetimes (POSIXct)</a></li>
<li class="chapter" data-level="3.3.8" data-path="for-students.html"><a href="for-students.html#technicalities"><i class="fa fa-check"></i><b>3.3.8</b> Technicalities</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="for-students.html"><a href="for-students.html#data-structures"><i class="fa fa-check"></i><b>3.4</b> Data structures</a><ul>
<li class="chapter" data-level="3.4.1" data-path="for-students.html"><a href="for-students.html#vectors"><i class="fa fa-check"></i><b>3.4.1</b> Vectors</a></li>
<li class="chapter" data-level="3.4.2" data-path="for-students.html"><a href="for-students.html#lists"><i class="fa fa-check"></i><b>3.4.2</b> Lists</a></li>
<li class="chapter" data-level="3.4.3" data-path="for-students.html"><a href="for-students.html#lists-vs-vectors"><i class="fa fa-check"></i><b>3.4.3</b> Lists vs Vectors</a></li>
<li class="chapter" data-level="3.4.4" data-path="for-students.html"><a href="for-students.html#matrices"><i class="fa fa-check"></i><b>3.4.4</b> Matrices</a></li>
<li class="chapter" data-level="3.4.5" data-path="for-students.html"><a href="for-students.html#dataframes"><i class="fa fa-check"></i><b>3.4.5</b> Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="for-students.html"><a href="for-students.html#subsetting"><i class="fa fa-check"></i><b>3.5</b> Subsetting</a></li>
<li class="chapter" data-level="3.6" data-path="for-students.html"><a href="for-students.html#vectors-1"><i class="fa fa-check"></i><b>3.6</b> Vectors</a><ul>
<li class="chapter" data-level="3.6.1" data-path="for-students.html"><a href="for-students.html#lists-1"><i class="fa fa-check"></i><b>3.6.1</b> Lists</a></li>
<li class="chapter" data-level="3.6.2" data-path="for-students.html"><a href="for-students.html#matrices-1"><i class="fa fa-check"></i><b>3.6.2</b> Matrices</a></li>
<li class="chapter" data-level="3.6.3" data-path="for-students.html"><a href="for-students.html#dataframes-1"><i class="fa fa-check"></i><b>3.6.3</b> Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="for-students.html"><a href="for-students.html#functions"><i class="fa fa-check"></i><b>3.7</b> Functions</a><ul>
<li class="chapter" data-level="3.7.1" data-path="for-students.html"><a href="for-students.html#function-basics"><i class="fa fa-check"></i><b>3.7.1</b> Function basics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="for-teachers.html"><a href="for-teachers.html"><i class="fa fa-check"></i><b>4</b> For Teachers</a><ul>
<li class="chapter" data-level="4.1" data-path="for-teachers.html"><a href="for-teachers.html#functions-1"><i class="fa fa-check"></i><b>4.1</b> Functions</a><ul>
<li class="chapter" data-level="4.1.1" data-path="for-teachers.html"><a href="for-teachers.html#creating-functions"><i class="fa fa-check"></i><b>4.1.1</b> Creating functions</a></li>
<li class="chapter" data-level="4.1.2" data-path="for-teachers.html"><a href="for-teachers.html#function-environments"><i class="fa fa-check"></i><b>4.1.2</b> Function environments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>5</b> Exercises</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Teach Yourself or Others R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="for-teachers" class="section level1">
<h1><span class="header-section-number">4</span> For Teachers</h1>
<div id="functions-1" class="section level2">
<h2><span class="header-section-number">4.1</span> Functions</h2>
<p>If you’re interested, there are some specifics about function inputs in R that can be good to know.</p>
<p>Firstly, unlike some other languages, functions do not have a specific data type tied to each input parameter. Any requirements that should be imposed on an input parameter (e.g. it should be numeric) are done by the function creator in the body of the function. So for instance, when you try to sum character strings, the error you get occurs because of type-checking in the body of the function, not when you provide the input parameters.</p>
<p>Secondly, functions are technically just another object. This means that you can use functions like you would any other object. For instance, some functions will accept other functions as an input parameter. When we move onto the <code>apply</code> logic, the <code>lapply()</code> function requires a <code>FUN</code> parameter that is the function the be applied each time. This doesn’t really come into play right now or even at a beginner level, but later on it can be very powerful.</p>
<p>Linked with the idea that functions are just another type of an object, there is an important distinction between
<code>sum</code>
and
<code>sum()</code>. The first will return the <code>sum</code> <em>object</em>. That is, not the result of applying inputs to the <code>sum</code> function, but the function itself. If you just type the name of the function into the console, it will show you the code for that function:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" title="1">sum</a></code></pre></div>
<pre><code>## function (..., na.rm = FALSE)  .Primitive(&quot;sum&quot;)</code></pre>
<p>Conversely, <code>sum()</code> will attempt to apply the <code>sum</code> function to the inputs provided in the brackets.</p>
<p>Again, while this is isn’t really a massive point for the moment, it can help some understand the fundamental building blocks of R.</p>
<div id="creating-functions" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Creating functions</h3>
<p>R and its packages give you access to hundreds of thousands of different functions, all tailored to perform a particular task. Despite this wide array to choose from however, they will always be cases where there isn’t a function to do exactly what you need to do. For those of you coming over from Excel, this can often be a serious source of frustration where there isn’t an Excel function for you to use and there isn’t an easy way to create one without knowing VBA.</p>
<p>R is different. Creating functions can be very simple, and will really change the way you work.</p>
<p>Creating functions will also highlight an important delineation. Previously, we’ve been focusing on <em>calling</em> functions. Calling a function is essentially using it. But in order to call a function, it needs to be <em>defined</em>. Base functions are already defined, but when you’re creating your own functions, you are <em>defining</em> a new function that you’re presumably going to call later on.</p>
<div id="function-structure" class="section level4">
<h4><span class="header-section-number">4.1.1.1</span> Function structure</h4>
<p>If we go back to the beginning of this chapter, we learnt that everything that exists is an object. Functions are no exception, and so we create them like we do all our other objects. There is a slight diversion however. When we define a function, we assign it to an object with the <code>function</code> keyword like this:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" title="1">my_first_function &lt;-<span class="st"> </span><span class="cf">function</span>() {}</a></code></pre></div>
<p>Notice how we’ve got two sets of brackets here. The first (<code>()</code>) is where we define our input parameters. The second (<code>{}</code>) is where we define the body of our function.</p>
<p>Let’s do a simple example. Let’s create a function that adds two numbers together:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" title="1">my_sum_function &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</a>
<a class="sourceLine" id="cb183-2" title="2">  x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb183-3" title="3">}</a></code></pre></div>
<p>So in this example, I’ve defined that when anyone uses the function, they need to provide two input parameters named <code>x</code> and <code>y</code>. Something that people tend to struggle with is that the names of your input parameters have no implicit meaning. They are just used to reference the value provided in the body of the function and, hopefully, make it clear what kind of thing the user of the function should be providing. This is why for example in some functions that require a dataframe there will be an input parameter called <code>df</code> or similar. But importantly, these names are technically just arbitrary.</p>
<p>In the body of the function, we can see that we’re just doing something really simple: we’re adding <code>x</code> and <code>y</code> together with <code>+</code>.</p>
<p>Once I’ve run the code to <strong>define</strong> my function, I can then <strong>call</strong> it like I would any other function:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" title="1"><span class="kw">my_sum_function</span>(<span class="dt">x =</span> <span class="dv">5</span>, <span class="dt">y =</span> <span class="dv">6</span>)</a></code></pre></div>
<pre><code>## [1] 11</code></pre>
</div>
<div id="optional-input-parameters-1" class="section level4">
<h4><span class="header-section-number">4.1.1.2</span> Optional input parameters</h4>
<p>When defining your function, you can define optional parameters. These will likely be values where most of the time you need it to be one thing, but there are edge cases where you need it to be something else. Defining optional parameters is really easy; whenever you define your function, just give it a value and that will be its default:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" title="1">add_mostly_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">y =</span> <span class="dv">2</span>){</a>
<a class="sourceLine" id="cb186-2" title="2">  x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb186-3" title="3">}</a>
<a class="sourceLine" id="cb186-4" title="4"></a>
<a class="sourceLine" id="cb186-5" title="5"><span class="kw">add_mostly_2</span>(<span class="dt">x =</span> <span class="dv">5</span>)</a></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" title="1"><span class="kw">add_mostly_2</span>(<span class="dt">x =</span> <span class="dv">5</span>, <span class="dt">y =</span> <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] 8</code></pre>
</div>
<div id="section" class="section level4">
<h4><span class="header-section-number">4.1.1.3</span> …</h4>
<p>You’ll notice a crucial distinction between R’s <code>sum()</code> function and ours. The base function allows for an indeterminate number of input parameters, whereas we’ve only allowed 2 (<code>x</code> and <code>y</code>). This is because the base <code>sum()</code> function uses a <code>...</code>. This <code>...</code> is essentially shorthand for “as many or as few inputs as the user wants to provide”. To use the <code>...</code>, just add it as in an input parameter:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" title="1">dot_dot_dot_function &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, ...) {</a>
<a class="sourceLine" id="cb190-2" title="2">}</a></code></pre></div>
<p>The <code>...</code> works particularly well when you might be creating a function that <em>wraps</em> around another one. A wrapping function is just a function that makes a call to another one within it, like this:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" title="1">sum_and_add_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="cf">function</span>(...){</a>
<a class="sourceLine" id="cb191-2" title="2">  <span class="kw">sum</span>(...) <span class="op">+</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb191-3" title="3">}</a></code></pre></div>
<p>All we’re basically doing in the above wrapping around the <code>sum()</code> function to add some specific functionality.</p>
<p>By using the <code>...</code> here, we can just pass everything that the user provides to the <code>sum()</code> function. This means we don’t have to worry about copying any input parameters.</p>
</div>
</div>
<div id="function-environments" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Function environments</h3>
<p>To better understand how functions operate, we need to understand how environments and scoping works in R. There’s a separate chapter on environments in this book, but we’ll briefly look at how functions create environments.</p>
<p>Environments are hierarchical collections of objects. You can think of these environments as going from non-specific to specific. When you define a variable in a script, you are creating that variable in the <em>global environment</em>, a very non-specific environment. Functions, however, create their own more specific environment when they are called, but will inherit the values from the more general environments.</p>
<p>This breeds some specific behaviours. For example, say you’ve written a function that expects two input parameters, <code>x</code> and <code>y</code>. Well, what would happen if someone had already defined an <code>x</code> and <code>y</code> variable in their script? Which value should R use?</p>
<p>Let’s see what happens.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" title="1">sum_custom &lt;-<span class="st"> </span><span class="cf">function</span>(x,y) {</a>
<a class="sourceLine" id="cb192-2" title="2">  x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb192-3" title="3">}</a>
<a class="sourceLine" id="cb192-4" title="4"></a>
<a class="sourceLine" id="cb192-5" title="5">x &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb192-6" title="6">y &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb192-7" title="7"></a>
<a class="sourceLine" id="cb192-8" title="8"><span class="kw">sum_custom</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> <span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>In this case, the fact that there is already an <code>x</code> and <code>y</code> in the global environment doesn’t really make much difference. The function creates its own more specific environment when it’s called, and it looks for the <code>x</code> and <code>y</code> variables in here first. It finds them and uses those values (1 and 2).</p>
<p>But what happens if a variable doesn’t exist in the more specific function environment? Let’s take a look.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" title="1">sum_custom &lt;-<span class="st"> </span><span class="cf">function</span>(x,y) {</a>
<a class="sourceLine" id="cb194-2" title="2">  x <span class="op">+</span><span class="st"> </span>y <span class="op">+</span><span class="st"> </span>w</a>
<a class="sourceLine" id="cb194-3" title="3">}</a>
<a class="sourceLine" id="cb194-4" title="4"></a>
<a class="sourceLine" id="cb194-5" title="5">w &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb194-6" title="6"></a>
<a class="sourceLine" id="cb194-7" title="7"><span class="kw">sum_custom</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> <span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p>In this case, the function looks in the specific environment for <code>w</code>, but it doesn’t exist. The only objects that exist in the function environment are the <code>x</code> and <code>y</code> that we’ve provided. So when R doesn’t find it in the more specific environment, it looks in the less-specific global environment. It finds, and so it uses the value it finds.</p>
<p>This can be a dangerous thing, so always make sure that you’re function is accessing the values you think it is.</p>
<p>So does R work the other way? Does it ever look in a more specific environment? Nope.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" title="1">sum_custom &lt;-<span class="st"> </span><span class="cf">function</span>(x,y){</a>
<a class="sourceLine" id="cb196-2" title="2">  im_a_sneaky_variable &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb196-3" title="3">  x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb196-4" title="4">}</a>
<a class="sourceLine" id="cb196-5" title="5"></a>
<a class="sourceLine" id="cb196-6" title="6">im_a_sneaky_variable</a></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;im_a_sneaky_variable&#39; not found</code></pre>
<p>Once the function is called, objects in its environment are unaccessible. The long and short of it is, R will start fromk specific environments and then look upwards, never downwards.</p>
<div id="super-assignment" class="section level4">
<h4><span class="header-section-number">4.1.2.1</span> ‘Super’ assignment</h4>
<p>There will be occassions however when you need to make changes to the global environment. For instance, say you want to increment a counter every time a function is called, regardless of where it’s called from. In these cases, you can use the controversial <code>&lt;&lt;-</code> operator. This is used as an assignment operator to assign a value to the global environment. Observe…</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" title="1">sum_custom &lt;-<span class="st"> </span><span class="cf">function</span>(x,y) {</a>
<a class="sourceLine" id="cb198-2" title="2">  count &lt;&lt;-<span class="st"> </span>count <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb198-3" title="3">  x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb198-4" title="4">}</a>
<a class="sourceLine" id="cb198-5" title="5"></a>
<a class="sourceLine" id="cb198-6" title="6">count &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb198-7" title="7"></a>
<a class="sourceLine" id="cb198-8" title="8"><span class="kw">sum_custom</span>(<span class="dv">1</span>,<span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" title="1">count</a></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" title="1"><span class="kw">sum_custom</span>(<span class="dv">2</span>,<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" title="1">count</a></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Note how when we assign <code>0</code> to our <code>count</code> variable outside of the function, we don’t need to use <code>&lt;&lt;-</code>. This is because we’re already assigning to the global environment.</p>
<p>Use the <code>&lt;&lt;-</code> with care and only assign something to the global environment if you really need to. Otherwise, you may start overwriting variables in your global environment without ever realising it.</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="for-students.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exercises.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["_main.pdf", "PDF"], ["_main.epub", "EBook"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
